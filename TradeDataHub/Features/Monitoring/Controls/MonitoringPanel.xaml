<UserControl x:Class="TradeDataHub.Features.Monitoring.Controls.MonitoringPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DesignHeight="200" d:DesignWidth="800">
    
    <UserControl.Resources>
        <!-- Enhanced SVG Icons -->
        <Path x:Key="MonitorIcon" Data="M3 3h18v12H3V3zm16 10V5H5v8h14zM2 17h20v2H2v-2z" Fill="#495057" Stretch="Uniform" Width="16" Height="16"/>
        <Path x:Key="ActivityIcon" Data="M3 6h18v2H3V6zm0 4h18v2H3v-2zm0 4h18v2H3v-2z" Fill="#495057" Stretch="Uniform" Width="16" Height="16"/>
        <Path x:Key="CheckIcon" Data="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" Fill="#28a745" Stretch="Uniform" Width="14" Height="14"/>
        <Path x:Key="ErrorIcon" Data="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" Fill="#dc3545" Stretch="Uniform" Width="14" Height="14"/>
        <Path x:Key="WarningIcon" Data="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z" Fill="#ffc107" Stretch="Uniform" Width="14" Height="14"/>
        
        <!-- Enhanced Typography Styles -->
        <Style x:Key="TitleTextStyle" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Segoe UI, Inter, system-ui, sans-serif"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Foreground" Value="#2c3e50"/>
            <Setter Property="LineHeight" Value="20"/>
        </Style>
        
        <Style x:Key="SubtitleTextStyle" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Segoe UI, system-ui, sans-serif"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Foreground" Value="#495057"/>
            <Setter Property="LineHeight" Value="18"/>
        </Style>
        
        <Style x:Key="MetricTextStyle" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Segoe UI, system-ui, sans-serif"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Foreground" Value="#6c757d"/>
        </Style>
        
        <Style x:Key="ValueTextStyle" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Inter, Segoe UI, system-ui, sans-serif"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Foreground" Value="#2c3e50"/>
        </Style>
        
        <!-- Enhanced Badge Style -->
        <Style x:Key="StatusBadgeStyle" TargetType="Border">
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="Margin" Value="5,0"/>
            <Setter Property="MinWidth" Value="85"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#000000" ShadowDepth="1" BlurRadius="3" Opacity="0.1"/>
                </Setter.Value>
            </Setter>
        </Style>
        
        <Style x:Key="LogEntryStyle" TargetType="ListViewItem">
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="Margin" Value="0,1"/>
            <Setter Property="BorderThickness" Value="0,0,0,1"/>
            <Setter Property="BorderBrush" Value="#f1f3f5"/>
            <Setter Property="FontFamily" Value="Segoe UI, system-ui, sans-serif"/>
        </Style>
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Enhanced Status Display Section -->
        <Border Grid.Row="0" Background="#f8f9fa" BorderBrush="#e9ecef" BorderThickness="1" Padding="18,12" CornerRadius="6">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Monitor Icon and Enhanced Title -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                    <ContentPresenter Content="{StaticResource MonitorIcon}" Margin="0,0,10,0"/>
                    <TextBlock Text="System Monitor" Style="{StaticResource TitleTextStyle}"/>
                </StackPanel>

                <!-- Enhanced Status Badge and Detailed Information -->
                <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="30,0,0,0">
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,4">
                        <Border x:Name="StatusBadge" Style="{StaticResource StatusBadgeStyle}">
                            <StackPanel Orientation="Horizontal">
                                <Ellipse x:Name="StatusIndicator" Width="8" Height="8" Margin="0,0,6,0" VerticalAlignment="Center"/>
                                <TextBlock x:Name="StatusText" Text="Idle" FontWeight="SemiBold" Foreground="White" FontSize="11"/>
                            </StackPanel>
                        </Border>
                        
                        <TextBlock x:Name="StatusMessage" Text="Application ready" 
                                   VerticalAlignment="Center" Margin="15,0,0,0" Style="{StaticResource SubtitleTextStyle}"/>
                    </StackPanel>
                    
                    <!-- Detailed Information Row -->
                    <StackPanel Orientation="Horizontal" Margin="0,2,0,0">
                        <TextBlock x:Name="CurrentFileText" Text="" Style="{StaticResource ValueTextStyle}" Margin="0,0,20,0"/>
                        <TextBlock x:Name="RecordCountText" Text="" Style="{StaticResource ValueTextStyle}" Margin="0,0,20,0"/>
                        <TextBlock x:Name="ElapsedTimeText" Text="" Style="{StaticResource ValueTextStyle}"/>
                    </StackPanel>
                </StackPanel>

                <!-- Enhanced Progress Section -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center" Margin="25,0">
                    <StackPanel>
                        <TextBlock Text="Progress" Style="{StaticResource MetricTextStyle}" Margin="0,0,0,3"/>
                        <StackPanel Orientation="Horizontal">
                            <ProgressBar x:Name="ProgressBar" Width="140" Height="8" Minimum="0" Maximum="100" Value="0" 
                                         Background="#e9ecef" BorderThickness="0"/>
                            <TextBlock x:Name="ProgressText" Text="0%" Style="{StaticResource MetricTextStyle}" 
                                       Margin="8,0,0,0" VerticalAlignment="Center"/>
                        </StackPanel>
                    </StackPanel>
                </StackPanel>

                <!-- Enhanced Control Buttons -->
                <StackPanel Grid.Column="3" Orientation="Horizontal" Margin="20,0,0,0">
                    <Button x:Name="ClearLogsButton" Content="Clear Logs" Width="80" Height="26" 
                            Click="ClearLogsButton_Click" Background="#ffffff" BorderBrush="#dee2e6" 
                            FontSize="11" Margin="0,0,8,0" FontFamily="Segoe UI" FontWeight="Medium"
                            BorderThickness="1">
                        <Button.Effect>
                            <DropShadowEffect Color="#000000" ShadowDepth="1" BlurRadius="2" Opacity="0.1"/>
                        </Button.Effect>
                    </Button>
                    <ToggleButton x:Name="AutoScrollToggle" Content="Auto-scroll" Width="80" Height="26" 
                                  IsChecked="True" Click="AutoScrollToggle_Click" FontSize="11" Margin="0,0,0,0"
                                  FontFamily="Segoe UI" FontWeight="Medium" BorderThickness="1">
                        <ToggleButton.Effect>
                            <DropShadowEffect Color="#000000" ShadowDepth="1" BlurRadius="2" Opacity="0.1"/>
                        </ToggleButton.Effect>
                    </ToggleButton>
                </StackPanel>

                <!-- Enhanced Timestamp -->
                <StackPanel Grid.Column="4" Orientation="Horizontal" VerticalAlignment="Center" Margin="20,0,0,0">
                    <StackPanel>
                        <TextBlock Text="Last Update" Style="{StaticResource MetricTextStyle}" Margin="0,0,0,2"/>
                        <TextBlock x:Name="LastUpdateText" Text="" FontSize="11" 
                                   Foreground="#6c757d" VerticalAlignment="Center" FontFamily="Consolas"/>
                    </StackPanel>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Enhanced Logs Viewer Section -->
        <Border Grid.Row="1" Background="#ffffff" BorderBrush="#e9ecef" BorderThickness="1,0,1,1" CornerRadius="0,0,6,6">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Enhanced Logs Header -->
                <Border Grid.Row="0" Background="#f8f9fa" Padding="15,8" BorderBrush="#e9ecef" BorderThickness="0,0,0,1">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                            <ContentPresenter Content="{StaticResource ActivityIcon}" Margin="0,0,8,0"/>
                            <TextBlock Text="Activity Monitor" Style="{StaticResource TitleTextStyle}"/>
                            <TextBlock x:Name="LogCountText" Text="1 entries" Style="{StaticResource MetricTextStyle}" 
                                       VerticalAlignment="Center" Margin="15,0,0,0"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- Enhanced Logs List with Scroll Optimization -->
                <ListView Grid.Row="1" x:Name="LogsListView" Background="#ffffff" BorderThickness="0"
                          MaxHeight="300" 
                          ScrollViewer.HorizontalScrollBarVisibility="Auto" 
                          ScrollViewer.VerticalScrollBarVisibility="Auto"
                          ScrollViewer.CanContentScroll="True"
                          VirtualizingPanel.IsVirtualizing="True"
                          VirtualizingPanel.VirtualizationMode="Recycling"
                          ItemContainerStyle="{StaticResource LogEntryStyle}"
                          FontFamily="Segoe UI, system-ui, sans-serif">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="Time" Width="90">
                                <GridViewColumn.HeaderContainerStyle>
                                    <Style TargetType="GridViewColumnHeader">
                                        <Setter Property="FontFamily" Value="Segoe UI"/>
                                        <Setter Property="FontWeight" Value="SemiBold"/>
                                        <Setter Property="FontSize" Value="11"/>
                                        <Setter Property="Foreground" Value="#495057"/>
                                        <Setter Property="Background" Value="#f8f9fa"/>
                                        <Setter Property="BorderBrush" Value="#dee2e6"/>
                                        <Setter Property="Padding" Value="8,6"/>
                                    </Style>
                                </GridViewColumn.HeaderContainerStyle>
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding FormattedTimestamp}" FontSize="10" 
                                                   FontFamily="JetBrains Mono, Consolas, monospace" 
                                                   Foreground="#6c757d" FontWeight="Medium"/>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                            
                            <GridViewColumn Header="Level" Width="70">
                                <GridViewColumn.HeaderContainerStyle>
                                    <Style TargetType="GridViewColumnHeader">
                                        <Setter Property="FontFamily" Value="Segoe UI"/>
                                        <Setter Property="FontWeight" Value="SemiBold"/>
                                        <Setter Property="FontSize" Value="11"/>
                                        <Setter Property="Foreground" Value="#495057"/>
                                        <Setter Property="Background" Value="#f8f9fa"/>
                                        <Setter Property="BorderBrush" Value="#dee2e6"/>
                                        <Setter Property="Padding" Value="8,6"/>
                                    </Style>
                                </GridViewColumn.HeaderContainerStyle>
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <Border Background="{Binding LevelColor}" CornerRadius="4" Padding="6,3" MinWidth="50">
                                            <TextBlock Text="{Binding LevelText}" FontSize="9" FontWeight="Bold" 
                                                       Foreground="White" HorizontalAlignment="Center"
                                                       FontFamily="Segoe UI"/>
                                        </Border>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                            
                            <GridViewColumn Header="Source" Width="130">
                                <GridViewColumn.HeaderContainerStyle>
                                    <Style TargetType="GridViewColumnHeader">
                                        <Setter Property="FontFamily" Value="Segoe UI"/>
                                        <Setter Property="FontWeight" Value="SemiBold"/>
                                        <Setter Property="FontSize" Value="11"/>
                                        <Setter Property="Foreground" Value="#495057"/>
                                        <Setter Property="Background" Value="#f8f9fa"/>
                                        <Setter Property="BorderBrush" Value="#dee2e6"/>
                                        <Setter Property="Padding" Value="8,6"/>
                                    </Style>
                                </GridViewColumn.HeaderContainerStyle>
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding Source}" FontSize="11" Foreground="#495057" 
                                                   FontWeight="SemiBold" FontFamily="Segoe UI"/>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                            
                            <GridViewColumn Header="Message" Width="650">
                                <GridViewColumn.HeaderContainerStyle>
                                    <Style TargetType="GridViewColumnHeader">
                                        <Setter Property="FontFamily" Value="Segoe UI"/>
                                        <Setter Property="FontWeight" Value="SemiBold"/>
                                        <Setter Property="FontSize" Value="11"/>
                                        <Setter Property="Foreground" Value="#495057"/>
                                        <Setter Property="Background" Value="#f8f9fa"/>
                                        <Setter Property="BorderBrush" Value="#dee2e6"/>
                                        <Setter Property="Padding" Value="8,6"/>
                                    </Style>
                                </GridViewColumn.HeaderContainerStyle>
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding Message}" FontSize="11" Foreground="#2c3e50" 
                                                   TextWrapping="NoWrap" ToolTip="{Binding Message}"
                                                   FontFamily="Segoe UI" FontWeight="Normal" LineHeight="16"/>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                        </GridView>
                    </ListView.View>
                </ListView>
            </Grid>
        </Border>
    </Grid>
</UserControl>
